---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import { Icon } from "astro-icon/components";
import { SITE } from "../../config/site.mjs";
---

<Layout
  title={`shishutsukan | ${SITE.title}`}
  description="支出館"
  canonicalURL={`${SITE.url}/apps/shishutsukan`}
>
  <Header />
  <main id="main-content" class="mx-auto max-w-5xl px-6 py-16">
    <header class="mb-10">
      <p class="text-sm font-semibold text-gray-500">App</p>
      <h1 class="mt-2 text-4xl font-bold text-gray-900">shishutsukan</h1>
      <p class="mt-4 text-lg text-gray-600">
        支出館。それは一覧性を重視した支出管理アプリ。
      </p>
      <div class="mt-6 flex flex-wrap gap-3">
        <a
          href="https://github.com/sfujibijutsukan/shishutsukan"
          class="inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-gray-900 hover:bg-gray-50 transition-colors"
          target="_blank"
          rel="noopener noreferrer"
        >
          <Icon name="tabler:brand-github" class="h-5 w-5" aria-hidden="true" />
          GitHub
        </a>
      </div>
    </header>

    <section class="grid gap-8 lg:grid-cols-[2fr,1fr]">
      <div class="space-y-8">
        <div class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
          <h2 class="text-2xl font-semibold text-gray-900">概要</h2>
          <p class="mt-3 text-gray-600">
            日々の支出をジャンル別に記録し、月別・日別でグラフ化します。<br>
            直感的な入力と一覧性を両立し、支出の可視化をシンプルに行えます。
          </p>
        </div>

        <div class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
          <h2 class="text-2xl font-semibold text-gray-900">プレビュー</h2>
          <div
            class="mt-4 flex gap-4 overflow-x-auto scroll-smooth snap-x snap-mandatory pb-4"
            aria-label="支出館のスクリーンショット"
          >
            <figure class="snap-center shrink-0 w-[85%] md:w-[70%]">
              <div class="h-80 md:h-96 lg:h-[28rem] overflow-hidden rounded-xl border border-gray-200 bg-gray-50">
                <button
                  type="button"
                  class="h-full w-full cursor-zoom-in"
                  data-full="/images/apps/shishutsukan-pc.png"
                  data-alt="支出館のデスクトップ画面"
                >
                  <img
                    src="/images/apps/shishutsukan-pc.png"
                    alt="支出館のデスクトップ画面"
                    class="h-full w-full object-contain md:object-cover"
                  />
                </button>
              </div>
            </figure>
            <figure class="snap-center shrink-0 w-[85%] md:w-[70%]">
              <div class="h-80 md:h-96 lg:h-[28rem] rounded-2xl border border-gray-200 bg-white p-4 shadow-sm">
                <div class="h-full w-full overflow-hidden rounded-xl border border-gray-100 bg-gray-50">
                  <button
                    type="button"
                    class="h-full w-full cursor-zoom-in"
                    data-full="/images/apps/shishutsukan-phone1.png"
                    data-alt="支出館のスマホ画面 1"
                  >
                    <img
                      src="/images/apps/shishutsukan-phone1.png"
                      alt="支出館のスマホ画面 1"
                      class="h-full w-full object-contain"
                    />
                  </button>
                </div>
              </div>
            </figure>
            <figure class="snap-center shrink-0 w-[85%] md:w-[70%]">
              <div class="h-80 md:h-96 lg:h-[28rem] rounded-2xl border border-gray-200 bg-white p-4 shadow-sm">
                <div class="h-full w-full overflow-hidden rounded-xl border border-gray-100 bg-gray-50">
                  <button
                    type="button"
                    class="h-full w-full cursor-zoom-in"
                    data-full="/images/apps/shishutsukan-phone2.png"
                    data-alt="支出館のスマホ画面 2"
                  >
                    <img
                      src="/images/apps/shishutsukan-phone2.png"
                      alt="支出館のスマホ画面 2"
                      class="h-full w-full object-contain"
                    />
                  </button>
                </div>
              </div>
            </figure>
          </div>
          <p class="mt-2 text-sm text-gray-500">レスポンジブデザインを採用し、横長表示と縦長表示ができます。</p>
        </div>
      </div>

    </section>
  </main>
  <dialog id="image-lightbox" class="backdrop:bg-black/70 p-0 rounded-2xl">
    <div
      id="lightbox-panel"
      class="bg-black/90 p-4 md:p-6 opacity-0 scale-95 transition duration-200 ease-out"
    >
      <button
        type="button"
        class="absolute right-4 top-4 rounded-full bg-white/90 px-3 py-1 text-sm text-gray-900"
        data-close
      >
        Close
      </button>
      <img
        id="lightbox-image"
        src=""
        alt=""
        class="max-h-[85vh] w-auto max-w-[90vw] object-contain"
      />
    </div>
  </dialog>
  <Footer />
</Layout>

<script>
  const dialog = document.getElementById('image-lightbox');
  const lightboxImage = document.getElementById('lightbox-image');

  const openLightbox = (src, alt) => {
    if (!dialog || !lightboxImage) return;
    lightboxImage.src = src;
    lightboxImage.alt = alt || '';
    lightboxImage.classList.remove('is-loaded');
    if (typeof dialog.showModal === 'function') {
      dialog.showModal();
    }
    if (lightboxImage.complete) {
      lightboxImage.classList.add('is-loaded');
    } else {
      lightboxImage.addEventListener(
        'load',
        () => lightboxImage.classList.add('is-loaded'),
        { once: true }
      );
    }
  };

  document.querySelectorAll('[data-full]').forEach((button) => {
    button.addEventListener('click', () => {
      openLightbox(button.dataset.full, button.dataset.alt);
    });
  });

  if (dialog) {
    dialog.addEventListener('click', (event) => {
      if (event.target === dialog) {
        dialog.close();
      }
    });
  }

  document.querySelectorAll('[data-close]').forEach((button) => {
    button.addEventListener('click', () => dialog?.close());
  });
</script>

<style>
  dialog[open] #lightbox-panel {
    opacity: 1;
    transform: scale(1);
  }

  #lightbox-image {
    opacity: 0;
    transition: opacity 200ms ease;
  }

  #lightbox-image.is-loaded {
    opacity: 1;
  }
</style>
